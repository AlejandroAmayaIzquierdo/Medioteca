<header
  class="sticky top-0 z-50 w-full bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-md"
>
  <nav class="mx-auto px-4 py-4 flex justify-between items-center max-w-375">
    <a routerLink="/" class="text-2xl font-bold cursor-pointer">Medioteca</a>
    <div class="flex items-center gap-4">
      @if (authService.user()) {
        <hlm-popover>
          <button
            hlmPopoverTrigger
            class="flex items-center gap-2 hover:bg-gray-200 px-3 py-1 rounded cursor-pointer"
          >
            <hlm-avatar>
              <span hlmAvatarFallback>{{
                authService.user()?.userName?.charAt(0)?.toUpperCase()
              }}</span>
            </hlm-avatar>
            {{ authService.user()?.userName }}
          </button>
          <div hlmPopoverContent *brnPopoverContent="let ctx" class="right-20 top-5 mt-2 p-4 bg-white rounded shadow-lg z-50">
            <h1 class="text-lg font-semibold">{{ authService.user()?.userName }}</h1>
            <p class="text-sm text-muted-foreground mb-2">{{ authService.user()?.email }}</p>
            <hlm-separator />
            <button
              hlmBtn
              variant="ghost"
              class="w-full text-left"
              routerLink="/profile"
            >
              <div class="flex justify-start items-center w-full">
                <lucide-icon [name]="SettingsIcon" [size]="15" class="mr-2" />
                <span>Mi perfil</span>
              </div>
            </button>
            @if (authService.hasPermission(AdminAccess)) {
              <button
                hlmBtn
                variant="ghost"
                class="w-full text-left"
                routerLink="/admin"
              >
                <div class="flex justify-start items-center w-full">
                  <lucide-icon [name]="ShieldIcon" [size]="15" class="mr-2" />
                  <span>Admin</span>
                </div>
              </button>
            }
            <hlm-separator />
            <button hlmBtn variant="ghost" class="w-full text-left" (click)="authService.logout()">
              <div class="flex justify-start items-center w-full">
                <lucide-icon [name]="LogOutIcon" [size]="15" class="mr-2" />
                <span class="text-destructive">Cerrar sesión</span>
              </div>
            </button>
          </div>
        </hlm-popover>
      } @else {
        <button
          hlmBtn
          variant="ghost"
          routerLink="/login"
        >
          Iniciar sesión
        </button>
        <button
          hlmBtn
          routerLink="/register"
        >
          Registrarse
        </button>
      }
    </div>
  </nav>
</header>

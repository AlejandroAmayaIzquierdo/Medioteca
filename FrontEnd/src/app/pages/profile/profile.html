<div class="min-h-screen w-full flex items-center justify-center bg-background p-4">
  <section hlmCard class="w-full max-w-lg">
    <!-- Header con avatar -->
    <div hlmCardHeader class="flex flex-col items-center gap-4 pb-2">
      <hlm-avatar class="w-20 h-20" variant="large">
        <span hlmAvatarFallback class="text-2xl bg-primary text-white">
          {{ authService.user()?.userName?.charAt(0)?.toUpperCase() || 'U' }}
        </span>
      </hlm-avatar>
      <div class="text-center">
        <h1 hlmCardTitle class="text-2xl">Perfil de usuario</h1>
        <p hlmCardDescription>Gestiona la información de tu cuenta</p>
      </div>
    </div>

    <hlm-separator />

    <div hlmCardContent class="pt-6">
      <form (submit)="onSubmit($event)" class="flex flex-col gap-5">
        <!-- Nombre de usuario -->
        <div class="flex flex-col gap-2">
          <label hlmLabel for="user-name" class="flex items-center gap-2">
            <lucide-icon [name]="UserIcon" class="w-4 h-4 text-muted-foreground" />
            Nombre de usuario
          </label>
          <input
            hlmInput
            id="user-name"
            placeholder="Tu nombre de usuario"
            class="w-full"
            [formField]="updateUserForm.userName!"
          />
          @if (updateUserForm.userName!().touched() && updateUserForm.userName!().invalid()) {
            <span class="text-sm text-destructive">El nombre debe tener al menos 3 caracteres.</span>
          }
        </div>

        <!-- Email (solo lectura) -->
        <div class="flex flex-col gap-2">
          <label hlmLabel for="user-email" class="flex items-center gap-2">
            <lucide-icon [name]="MailIcon" class="w-4 h-4 text-muted-foreground" />
            Correo electrónico
          </label>
          <input
            hlmInput
            id="user-email"
            class="w-full bg-muted cursor-not-allowed"
            [value]="authService.user()?.email"
            disabled
          />
        </div>

        <hlm-separator />

        <!-- Roles -->
        <div class="flex flex-col gap-3">
          <label hlmLabel class="flex items-center gap-2">
            <lucide-icon [name]="ShieldIcon" class="w-4 h-4 text-muted-foreground" />
            Roles asignados
          </label>
          <div class="flex flex-wrap gap-2">
            @for (rol of authService.user()?.roles; track $index) {
              <span hlmBadge variant="secondary">{{ rol.name }}</span>
            } @empty {
              <span class="text-sm text-muted-foreground">Sin roles asignados</span>
            }
          </div>
        </div>
      </form>
    </div>

    <div hlmCardFooter class="pt-4">
      <button
        hlmBtn
        class="w-full"
        [disabled]="updateUserForm().invalid() || userService.loading()"
        (click)="onSubmit($event)"
      >
        <div class="flex gap-2 justify-center items-center">
          @if (userService.loading()) {
            <lucide-icon [name]="LoaderIcon" class="w-4 h-4 animate-spin" />
          }
          Guardar cambios
        </div>
      </button>
    </div>
  </section>
</div>
